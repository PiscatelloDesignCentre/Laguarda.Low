"use strict";var getCategories=function(){var a=_asyncToGenerator(regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,fetch(window.site_url+"/wp-json/wp/v2/categories?per_page=50",{method:"GET"}).then(function(a){return a.json()}).catch(function(a){throw new error(a)}).then(function(a){return categories=a,Promise.resolve(categories)});case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop();}},a,this)}));return function(){return a.apply(this,arguments)}}(),pageLoaded=function(){var a=_asyncToGenerator(regeneratorRuntime.mark(function a(){var b,c,d,e,f,g;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return loading=!0,a.next=3,getCategories();case 3:if(categories=a.sent,window.categories=categories,b="",location.hash&&!(1>location.hash.length)){a.next=11;break}return applyAnimation(),isPageLoaded=!0,loading=!1,a.abrupt("return");case 11:if(!location.hash){a.next=23;break}if(c=location.hash.replace("#",""),d=filterCategoryNames(c.toLowerCase()),document.querySelector(".category-name-band").innerText=c,currentFilter=d.id,b="&categories="+d.id,document.querySelectorAll(".navigation-tabs a").forEach(function(a){a.dataset.filter==d.id?a.classList.add("selected"):a.classList.remove("selected")}),19!=d.id){a.next=23;break}return document.body.classList.add("noscroll"),archivesLoaded(),document.querySelector(".archives-overlay").classList.add("visible"),a.abrupt("return");case 23:return document.querySelector(".spinner").classList.add("top-center"),document.querySelector(".spinner").classList.remove("hidden"),a.next=27,fetch(window.site_url+"wp-json/wp/v2/posts?_embed&order=asc&categories=51&per_page=16&page=1"+b,{method:"GET"}).then(function(a){return a.json()});case 27:if(e=a.sent,f=[],!(e.length&&11>e.length||window.page_length>=currentPage)){a.next=37;break}return categoryComplete=!0,e.forEach(function(a){idArr.push(a.id)}),a.next=34,fetch(window.site_url+"/wp-json/wp/v2/posts?_embed&order=asc&categories=51&parent=51&per_page=16&exclude="+(idArr.join(",")||-1),{method:"GET"}).then(function(a){return a.json()});case 34:f=a.sent,document.querySelector(".spinner").classList.remove("top-center"),document.querySelector(".spinner").classList.add("hidden");case 37:return isPageLoaded=!0,loading=!1,e=e.concat(f),a.next=42,returnProject(e);case 42:g=a.sent,document.querySelector(".grid-container").classList.remove("fade-out"),document.querySelector(".grid-container").innerHTML="",document.querySelector(".grid-container").innerHTML=g,applyAnimation();case 47:case"end":return a.stop();}},a,this)}));return function(){return a.apply(this,arguments)}}(),fadeOutAnimation=function(){var a=_asyncToGenerator(regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:document.querySelector(".grid-container").classList.add("fade-out");case 1:case"end":return a.stop();}},a,this)}));return function(){return a.apply(this,arguments)}}(),getNewPosts=function(){var a=_asyncToGenerator(regeneratorRuntime.mark(function a(b){var c,d,e,f=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(c="&categories="+b,d=[],loading=!0,console.log(b),b||(c=""),categoryComplete){a.next=9;break}return a.next=8,fetch(window.site_url+"/wp-json/wp/v2/posts?_embed&categories=51&order=asc&per_page=16&page="+f+c,{method:"GET"}).then(function(a){if(!a.ok)throw Error(a.statusText);return a.json()}).catch(function(){});case 8:d=a.sent;case 9:if(e=[],!(d.length&&11>d.length&&b||window.page_length>=f)){a.next=16;break}return categoryComplete=!0,d.forEach(function(a){idArr.push(a.id)}),a.next=15,fetch(window.site_url+"/wp-json/wp/v2/posts?_embed&categories=51&order=asc&per_page=16&page="+f+"&exclude="+(idArr.join(",")||-1),{method:"GET"}).then(function(a){return a.json()});case 15:e=a.sent;case 16:return loading=!1,a.abrupt("return",d.concat(e)||[]);case 18:case"end":return a.stop();}},a,this)}));return function(){return a.apply(this,arguments)}}(),filterProjects=function(){var a=_asyncToGenerator(regeneratorRuntime.mark(function a(b){var c,d;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(window.scrollTo(0,0),document.body.classList.remove("noscroll"),!b.target.classList.contains("selected")){a.next=4;break}return a.abrupt("return");case 4:return currentPage=1,idArr=[],categoryComplete=!1,loading=!0,document.querySelectorAll(".navigation-tabs a").forEach(function(a){a.classList.remove("selected")}),b.target.classList.add("selected"),a.next=12,fadeOutAnimation();case 12:if(19!=b.target.dataset.filter){a.next=24;break}return document.body.classList.add("noscroll"),document.querySelector(".spinner").classList.add("top-center"),document.querySelector(".spinner").classList.remove("hidden"),a.next=18,archivesLoaded();case 18:return document.querySelector(".archives-overlay").classList.add("visible"),document.querySelector(".spinner").classList.remove("top-center"),document.querySelector(".spinner").classList.add("hidden"),a.abrupt("return");case 24:document.body.classList.remove("noscroll"),document.querySelector(".archives-overlay").classList.remove("visible"),setTimeout(function(){document.querySelector(".table-contents").innerHTML=""},500);case 27:return currentFilter=b.target.dataset.filter,document.querySelector(".spinner").classList.add("top-center"),document.querySelector(".spinner").classList.remove("hidden"),a.next=32,getNewPosts(currentFilter);case 32:return c=a.sent,document.querySelector(".spinner").classList.add("hidden"),document.querySelector(".spinner").classList.remove("top-center"),a.next=37,returnProject(c);case 37:d=a.sent,document.querySelector(".grid-container").classList.remove("fade-out"),document.querySelector(".grid-container").innerHTML="",document.querySelector(".grid-container").innerHTML=d,applyAnimation(),loading=!1;case 43:case"end":return a.stop();}},a,this)}));return function(){return a.apply(this,arguments)}}(),returnProject=function(){var a=_asyncToGenerator(regeneratorRuntime.mark(function a(){var b,c=0<arguments.length&&arguments[0]!==void 0?arguments[0]:[],d=!!(1<arguments.length&&arguments[1]!==void 0)&&arguments[1];return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return b="",a.next=3,c.forEach(function(a){var c="<a href='"+a.link+"' class='project-thumb invisible'> \n                <img src='"+a._embedded["wp:featuredmedia"][0].source_url+"' /> \n                <div class='project-info'> \n                    <span class='project-title'> \n                        "+a.title.rendered+" \n                    </span> \n                    <span class='project-location'> \n                        "+a.acf.project_city+", "+a.acf.project_country+"\n                    </span>\n                    <span class='project-category'> \n                        "+mapCategories(a.categories).name+" \n                    </span> \n                </div> \n            </a>";d?document.querySelector(".project-grid .grid-container").insertAdjacentHTML("beforeend",c):b+=c});case 3:return a.abrupt("return",Promise.resolve(b));case 4:case"end":return a.stop();}},a,this)}));return function(){return a.apply(this,arguments)}}();function _asyncToGenerator(a){return function(){var b=a.apply(this,arguments);return new Promise(function(a,c){function d(e,f){try{var g=b[e](f),h=g.value}catch(a){return void c(a)}return g.done?void a(h):Promise.resolve(h).then(function(a){d("next",a)},function(a){d("throw",a)})}return d("next")})}}var urlPart={},categories=[],currentlyLoading=!1,currentPage=1,loading=!1,isPageLoaded=!1,currentFilter="",idArr=[],categoryComplete=!1;document.querySelectorAll(".navigation-tabs a").forEach(function(a){a.addEventListener("click",filterProjects)}),document.querySelectorAll(".drop-down-selector a").forEach(function(a){a.addEventListener("click",filterProjects)}),document.addEventListener("DOMContentLoaded",pageLoaded),window.onbeforeunload=function(){window.scrollTo(0,0)},window.addEventListener("hashchange",handleHashChange);function handleHashChange(){var a=location.hash.replace("#","");document.querySelector(".category-name-band").innerText=a||"All"}function filterCategoryNames(a){var b=categories.filter(function(b){return b.slug==a})[0];return b||""}function applyAnimation(){var a=0;document.querySelectorAll(".project-thumb.invisible").forEach(function(b){setTimeout(function(){b.classList.add("animate-grid"),b.classList.remove("invisible"),b.classList.remove("fade-out")},a),a+=200})}var delay=function(a){return new Promise(function(b){return setTimeout(b,a)})};function shuffle(b){for(var a=b.length-1;0<a;a--){var c=Math.floor(Math.random()*(a+1)),d=[b[c],b[a]];b[a]=d[0],b[c]=d[1]}return b}function mapCategories(a){var b=a.indexOf(51);-1!==b&&a.splice(b,1);var c=categories.filter(function(b){return b.id==a[0]});return c[0]||""}window.onscroll=_asyncToGenerator(regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:(function(){var a=_asyncToGenerator(regeneratorRuntime.mark(function a(b){var c,d,e,f;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(c=document.querySelector(".grid-container"),d=b(window).height()-b(".grid-container")[0].getBoundingClientRect().bottom,!(-200<d&&!loading&&isPageLoaded&&currentPage<window.page_length)){a.next=14;break}return loading=!0,currentPage++,document.querySelector(".spinner").classList.remove("hidden"),a.next=7,getNewPosts(currentFilter,currentPage);case 7:return e=a.sent,document.querySelector(".spinner").classList.add("hidden"),a.next=11,returnProject(e,!0);case 11:f=a.sent,applyAnimation(),loading=!1;case 14:case"end":return a.stop();}},a,this)}));return function(){return a.apply(this,arguments)}})()(jQuery);case 1:case"end":return a.stop();}},a,this)}));