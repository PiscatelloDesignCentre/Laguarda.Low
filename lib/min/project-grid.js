const _async=function(){try{if(isNaN.apply(null,{}))return function(a){return function(){try{return Promise.resolve(a.apply(this,arguments))}catch(a){return Promise.reject(a)}}}}catch(a){}return function(a){return function(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];try{return Promise.resolve(a.apply(this,b))}catch(a){return Promise.reject(a)}}}}();function _continue(a,b){return a&&a.then?a.then(b):b(a)}function _for(a,b,c){function d(g){i=g;do{if(b&&(j=b(),j&&j.then&&!_isSettledPact(j)))return void j.then(f).then(void 0,l);if(h=a(),!h||_isSettledPact(h)&&!h.__value)return void _settle(k,1,i);if(h.then)return void h.then(e).then(void 0,l);i=c(),_isSettledPact(i)&&(i=i.__value)}while(!i||!i.then);i.then(d).then(void 0,l)}function e(a){a?(i=c(),i&&i.then?i.then(d).then(void 0,l):d(i)):_settle(k,1,i)}function f(){(h=a())?h.then?h.then(e).then(void 0,l):e(h):_settle(k,1,i)}for(var g,h;;){if(h=a(),_isSettledPact(h)&&(h=h.__value),!h)return i;if(h.then){g=0;break}var i=c();if(i&&i.then)if(_isSettledPact(i))i=i.__state;else{g=1;break}if(b){var j=b();if(j&&j.then&&!_isSettledPact(j)){g=2;break}}}var k=new _Pact,l=_settle.bind(null,k,2);return(0===g?h.then(e):1===g?i.then(d):j.then(f)).then(void 0,l),k}function _isSettledPact(a){return a instanceof _Pact&&1===a.__state}const _Pact=function(){function a(){}return a.prototype.then=function(b,c){const d=this.__state;if(d){const e=1==d?b:c;if(e){const b=new a;try{_settle(b,1,e(this.__value))}catch(a){_settle(b,2,a)}return b}return this}const f=new a;return this.__observer=function(a){try{const d=a.__value;1==a.__state?_settle(f,1,b?b(d):d):c?_settle(f,1,c(d)):_settle(f,2,d)}catch(a){_settle(f,2,a)}},f},a}();function _settle(a,b,c){if(!a.__state){if(c instanceof _Pact)if(c.__state)1===b&&(b=c.__state),c=c.__value;else return void(c.__observer=_settle.bind(null,a,b));if(c&&c.then)return void c.then(_settle.bind(null,a,b),_settle.bind(null,a,2));a.__state=b,a.__value=c;const d=a.__observer;d&&d(a)}}function _invoke(a,b){var c=a();return c&&c.then?c.then(b):b(c)}function _call(a,b,c){if(c)return b?b(a()):a();try{var d=Promise.resolve(a());return b?d.then(b):d}catch(a){return Promise.reject(a)}}var loadRows=_async(function(a){let b="";globalPosts=a,a.forEach(function(a){b+="<div class='table-row' onclick='return slideOpen(event)'> \n                <div class='table-cell'>"+a.post_title+"</div> \n                <div class='table-cell'><span class=\"mobile-hidden\">Type:&nbsp;</span>"+a.category_names[0]+"</div> \n                <div class='table-cell'><span class=\"mobile-hidden\">Location:&nbsp;</span>"+a.project_city+", "+a.project_country+"</div>\n                <div class='table-cell'><span class=\"mobile-hidden\">Year:&nbsp;</span>"+a.post_year+"</div> \n                <a href=\""+a.permalink+"\" class='slide-open mobile-hidden'><img src='"+a.thumbnail+"' /></a> \n                <div class='slide-open'> \n                    "+function(a){if(""!=a.permalink)return"<a href='"+a.permalink+"' onclick='return event.stopPropagation()'>View Project</a>"}(a)+"   \n                    \n                </div> \n                <div class='slide-open'>\n                    <strong>Status</strong><br> \n                    <span>"+a.status+"</span> \n                    <br class=\"sm-hidden\"><br class=\"sm-hidden\"> \n                    <strong>Size</strong><br> \n                    <span>"+a.project_area+"</span> \n                    <br class=\"sm-hidden\"><br>\n                    <strong>Client</strong><br> \n                    <span>"+a.client+"</span> \n                    <br class=\"sm-hidden\"><br class=\"sm-hidden\">\n                </div> \n                <div class='slide-open'> \n                    <strong>Scope</strong><br> \n                    "+a.scope+" \n                </div> \n                <a href=\""+a.permalink+"\" class='slide-open sm-hidden'><img src='"+a.thumbnail+"' /></a> \n            </div>"}),document.querySelector(".table-contents").innerHTML=b,animateRows()}),fadeOutAnimation=_async(function(){document.querySelector(".grid-container").classList.add("fade-out")}),addPosts=_async(function(a,b){var c=!1;let d=!!(2<arguments.length&&arguments[2]!==void 0)&&arguments[2];var e="";let f=0;return _continue(_for(function(){return!c&&f<a},function(){return f++},function(){return _invoke(function(){if(d)return window.post_number=0,_call(fadeOutAnimation,function(){window.scrollTo(0,0),document.querySelector(".grid-container").innerHTML="",document.querySelector(".grid-container").classList.remove("fade-out")})},function(){if(window.post_number+(f+1)>b.length)return void(c=!0);let a=b[window.post_number+f];e+="<a href='"+a.permalink+"' class='project-thumb invisible'> \n            <img data-src='"+a.thumbnail+"' /> \n            <div class='project-info'> \n                <span class='project-title'> \n                    "+a.post_title+" \n                </span> \n                <span class='project-location'> \n                    "+a.project_city+", "+a.project_country+"\n                </span>\n                <span class='project-category'> \n                    "+a.category_names[0]+" \n                </span> \n            </div> \n        </a>"})}),function(){window.post_number+=a,document.querySelector(".grid-container").insertAdjacentHTML("beforeend",e),[].forEach.call(document.querySelectorAll("img[data-src]"),function(a){a.setAttribute("src",a.getAttribute("data-src")),a.onload=function(){a.removeAttribute("data-src")}}),applyAnimation()})});window.addEventListener("hashchange",handleHashChange);function applyAnimation(){var a=0;document.querySelectorAll(".project-thumb.invisible").forEach(function(b){setTimeout(function(){b.classList.add("animate-grid"),b.classList.remove("invisible"),b.classList.remove("fade-out")},a),a+=200})}var scroll=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)};function scrollAnimation(){var a=document.querySelector(".grid-container"),b=window.innerHeight-document.querySelector(".grid-container").getBoundingClientRect().bottom;100<b&&addPosts(4,window.posts),scroll(scrollAnimation)}scrollAnimation();function handleHashChange(){selectButton();var a=window.location.hash.replace("#","");changeMobileMenu(a),"archive"==a?showArchives():hideArchives(),filterPosts(a)}function showArchives(){fadeOutAnimation(),requestAnimationFrame(function(){requestAnimationFrame(function(){document.querySelector(".grid-container").style.display="none",document.querySelector(".archives-overlay").style.display="block"})})}function hideArchives(){fadeOutAnimation(),requestAnimationFrame(function(){requestAnimationFrame(function(){document.querySelector(".grid-container").style.display="flex",document.querySelector(".archives-overlay").style.display="none"})})}function filterPosts(a){let b=window.posts;var c=[],d=[];window.is_chinese&&(a=window.category_names[a.replace("-","")],console.log(a)),""!=a&&a?"current"==a?(c=b.filter(function(a){if(!0==a.is_current)return a}),0<c.length&&(d=b.filter(function(a){if(!1==a.is_current)return a}),window.posts=c.concat(d))):(c=b.filter(function(b){if(b.category_names[0].toLowerCase().replace(/\s/g,"-")==a)return b}),c=_.sortBy(c,"category_order"),0<c.length?(d=b.filter(function(b){if(b.category_names[0].toLowerCase().replace(/\s/g,"")!==a)return b}),window.posts=c.concat(d)):window.posts=getOriginalPosts()):(window.posts=getOriginalPosts(),console.log("being sorted!")),addPosts(16,window.posts,!0)}function getOriginalPosts(){return JSON.parse(JSON.stringify(window.posts_original))}function selectButton(){var a=document.querySelectorAll(".navigation-tabs a");let b=document.querySelector(".navigation-tabs a[href='"+window.location.hash.replace(/\s/g,"-")+"']");a.forEach(function(a){a.classList.remove("selected")}),b?b.classList.add("selected"):a[0].classList.add("selected")}function changeMobileMenu(a){var b=document.querySelector(".category-name-band");b.innerHTML=window.is_chinese?window.category_names[a.replace("-","")]||"\u6240\u6709":a.replace("-"," ")||"All"}document.addEventListener("DOMContentLoaded",function(){let a=_.sortBy(window.posts,function(a){return a.post_year});if(loadRows(a.reverse()),window.location.hash){let a=window.location.hash.replace("#","").replace("-","");"archive"==a?showArchives():filterPosts(a),selectButton()}else window.posts=getOriginalPosts(),addPosts(16,window.posts);scrollAnimation()});function preventBodyScroll(){document.body.classList.add("noscroll")}function slideOpen(a){a.currentTarget.classList.contains("selected")?(a.currentTarget.classList.toggle("selected"),a.currentTarget.querySelectorAll(".slide-open").forEach(function(a){a.classList.remove("open")})):(document.querySelectorAll(".table-row").forEach(function(a){a.classList.remove("selected")}),document.querySelectorAll(".slide-open").forEach(function(a){a.classList.remove("open")}),a.currentTarget.querySelectorAll(".slide-open").forEach(function(a){a.classList.add("open")}),a.currentTarget.classList.toggle("selected"))}document.querySelectorAll(".sort-header").forEach(function(a){a.addEventListener("click",function(a){document.querySelectorAll(".sort-header").forEach(function(a){a.classList.remove("active")}),a.currentTarget.classList.add("active");let b=a.currentTarget.dataset.key,c=a.currentTarget.dataset.direction,d=_.sortBy(window.posts,function(a){return a[b]});loadRows(d)})});function animateRows(){let a=0;document.querySelectorAll(".table-row").forEach(function(b){setTimeout(function(){b.classList.add("row-animate")},a),a+=75})}